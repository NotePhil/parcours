<div id="" class="d-flex flex-column justify-content-around">
  <div class="title" id="top1">
    <app-entete class="title"></app-entete>
  </div>
  <div class="card container-fluid" id="top">
    <div class='card-hearder pt-3'>
      <div class="d-flex align-items-center justify-content-end tableTools">
        <div class="mr-3" style="display: flex; align-items: center;">
          <app-modal-codebarre-scan-continue #barcodeScanner></app-modal-codebarre-scan-continue>
          <i class="fas fa-camera fa-3x icon" style="color:#28a745; cursor: pointer; position: relative;"
            (click)="openBarcodeScanner()"></i>
        </div>
        <div class="form-inline mr-2">
          <form class="example-form-entete">
            <input placeholder="{{'patient.search-bar' | translate}}" type="text" matInput aria-label="Rechercher" [formControl]="myControl" [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
              <mat-option *ngFor="let option of filteredOptions!" [value]="option.user"
                (onSelectionChange)="rechercherListingPersonnel(option)">
                {{option.user.nom}}
              </mat-option>
            </mat-autocomplete>
          </form>
        </div>
        <div role="button" id="addUserBotton" routerLink="../nouveau-personnel">
          <span title="Ajouter un personnel">
            <i class="fa fa-user-plus" aria-hidden="true"></i>
          </span>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="tableBlock">
      <div class="table-responsive w-100">
        <table class='table table-sm table-centered table-striped table-bordered w-100' mat-table
          [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">

          <!-- nom Column -->
          <ng-container matColumnDef="nom">
            <th class="containHead" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{"personnel.table.title1" | translate}} </th>
            <td class="containCell" mat-cell *matCellDef="let element"> {{element.user.nom}} </td>
          </ng-container>

          <!-- prenom Column -->
          <ng-container matColumnDef="prenom">
            <th class="containHead" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{"personnel.table.title2" | translate}} </th>
            <td class="containCell" mat-cell *matCellDef="let element"> {{element.user.prenom}} </td>
          </ng-container>

          <!-- birthday Column -->
          <ng-container matColumnDef="dateNaissance">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"personnel.table.title3" |
              translate}} </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.user.dateNaissance | date:
              'dd/MM/yyyy'}} </td>
          </ng-container>

          <!-- sexe Column -->
          <ng-container matColumnDef="sexe">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"personnel.table.title4" |
              translate}} </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.user.sexe}} </td>
          </ng-container>

          <!-- mail Column -->
          <ng-container matColumnDef="email">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"personnel.table.title5" |
              translate}} </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.user.email}} </td>
          </ng-container>

          <!-- telephone Column -->
          <ng-container matColumnDef="telephone">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"personnel.table.title7" |
              translate}} </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.user.telephone}} </td>
          </ng-container>

          <!-- groupe Column -->
          <ng-container matColumnDef="groupe">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> Groupe </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element">{{ element.groupe ? element.groupe.libelle : "Aucun" }}</td>
          </ng-container>

          <!-- dateEntree Column -->
          <ng-container matColumnDef="dateEntree">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"personnel.table.title6" |
              translate}} </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.user.dateEntree}} </td>
          </ng-container>

          <!-- dateSortie Column -->
          <ng-container matColumnDef="dateSortie">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"personnel.table.title8" |
              translate}} </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.user.dateSortie}} </td>
          </ng-container>

          <!-- action Column -->
          <ng-container matColumnDef="actions">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"personnel.table.title9" |
              translate}} </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element">
              <div id="actions" class="dropdown open">
                <button class="btn dropdown-toggle" type="button" id="triggerId" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <span>...</span>
                </button>
                <div class="dropdown-menu" aria-labelledby="triggerId">
                  <button class="dropdown-item nav-link" [routerLink]="['../affecte-role-personnel',element.user.id]"
                    title="{{'patient.table.actions.link3' | translate}}">
                    <i class="fa fa-eye text-secondary" aria-hidden="true"></i>
                    <span>{{'personnel.table.actions.link5' | translate}}</span>
                  </button>
                  <button class="dropdown-item nav-link" [routerLink]="['../update-personnel',element.user.id]"
                    title="{{'personnel.table.actions.link2' | translate}}">
                    <i class="fa fa-pen text-info" aria-hidden="true"></i>
                    <span>{{'personnel.table.actions.link2' | translate}}</span>
                  </button>
                  <button class="dropdown-item nav-link" (click)="openChoixGroupDialog(element.user)"
                    title="Affecter Ã  un groupe">
                    <i class="fa fa-pen text-info" aria-hidden="true"></i>
                    <span>Group</span>
                  </button>
                  <button class="dropdown-item nav-link" [routerLink]="['../detail-personnels',element.user.id]"
                    title="{{'personnel.table.action.link3' | translate}}">
                    <i class="fa fa-eye text-secondary" aria-hidden="true"></i>
                    <span>{{'personnel.table.actions.link3' | translate}} </span>

                  </button>

                </div>
              </div>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons aria-label="Select page of periodic elements">
        </mat-paginator>
      </div>

    </div>
  </div>
</div>