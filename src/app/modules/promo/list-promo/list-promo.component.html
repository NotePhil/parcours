<div id="" class="d-flex flex-column justify-content-around">
  <div class="title" id="top1">
    <app-entete class="title"></app-entete>
  </div>
  <div class="card container-fluid" id="top">
    <div class="pt-3">
      <div class="d-flex align-items-center justify-content-end tableTools">
        <div class="form-inline mr-2">
          <form class="example-form-entete">
            <input placeholder="{{'patient.search-bar' | translate}}" type="text" matInput aria-label="Rechercher" [formControl]="myControl" [matAutocomplete]="auto"/>
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn" >
              <mat-option *ngFor="let option of filteredOptions" [value]="option" (onSelectionChange)="rechercherListingPromo(option)" >
                {{ option.codeUnique }}
              </mat-option>
            </mat-autocomplete>
          </form>
        </div>
        <div role="button" id="addUserBotton" routerLink="../promo-nouveau">
          <span title="Ajouter une Promotion">
            <i class="fa fa-user-plus" aria-hidden="true"></i>
          </span>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="tableBlock">
      <div class="table-responsive w-100">
        <table
          class="table table-sm table-centered table-striped table-bordered w-100"
          mat-table
          [dataSource]="dataSource"
          matSort
          (matSortChange)="announceSortChange($event)"
        >
          <!-- Emetteur Column -->
          <ng-container matColumnDef="emetteur">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              {{ "promo-distributeur.emetteur" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.emetteur.raisonSocial }}
            </td>
          </ng-container>

          <!-- Date Debut Column -->
          <ng-container matColumnDef="dateDebut">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              {{ "promo-distributeur.date_debut" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.dateDebut | date }}
            </td>
          </ng-container>

          <!-- Date Fin Column -->
          <ng-container matColumnDef="dateFin">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              {{ "promo-distributeur.date_fin" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.dateFin | date }}
            </td>
          </ng-container>

          <!-- Code Unique Column -->
          <ng-container matColumnDef="codeUnique">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              {{ "promo-distributeur.code" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.codeUnique }}
            </td>
          </ng-container>

          <!-- Montant Remise Column -->
          <ng-container matColumnDef="montantRemise">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              {{ "promo-distributeur.montant" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.montantRemise }}
            </td>
          </ng-container>

          <!-- Pourcentage Remise Column -->
          <ng-container matColumnDef="pourcentageRemise">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              {{ "promo-distributeur.Pourcentage" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              {{ element.pourcentageRemise }}
            </td>
          </ng-container>

          <!-- Famille Column -->
          <ng-container matColumnDef="famille">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
            >
              {{ "promo-distributeur.famille" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              <span *ngFor="let fam of element.famille">
                {{ fam.libelle
                }}<span *ngIf="!isLastElement(element.famille, fam)">, </span>
              </span>
            </td>
          </ng-container>

          <!-- Ressource Column -->
          <ng-container matColumnDef="ressource">
            <th
              class="containHead"
              mat-header-cell
              *matHeaderCellDef
            >
              {{ "promo-distributeur.ressource" | translate }}
            </th>
            <td
              class="containCell"
              mat-cell
              *matCellDef="let element"
            >
              <span *ngFor="let res of element.ressource">
                {{ res.libelle
                }}<span *ngIf="!isLastElement(element.ressource, res)">, </span>
              </span>
            </td>
          </ng-container>

          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef>
              {{ "promo-distributeur.action" | translate }}
            </th>
            <td
              class="text-dark containCell"
              mat-cell
              *matCellDef="let element"
            >
              <div id="actions" class="dropdown-open">
                <button
                  class="btn dropdown-toggle"
                  type="button"
                  id="triggerId"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <span>...</span>
                </button>
                <div class="dropdown-menu" aria-labelledby="triggerId">
                  <button
                    class="dropdown-item nav-link"
                    [routerLink]="['/promo-nouveau', element.id]"
                    title="{{ 'promo.table1.actions.edit' | translate }}"
                  >
                    <i class="fa fa-pen text-info" aria-hidden="true"></i>
                    <span>
                      {{ "promo-distributeur.modifier" | translate }}</span
                    >
                  </button>
                </div>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <mat-paginator
          style="background-color: rgba(40, 167, 69, 0.79)"
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
          aria-label="Select page of periodic elements"
        >
        </mat-paginator>
      </div>
    </div>
  </div>
</div>
