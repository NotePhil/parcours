<div class="mainBlock" id="top2">
    <div id="globalSection">
       <h3 *ngIf="this.exemplairesDePersonne.length > 0">
           {{this.exemplaire.titre}}
       </h3>
       <h3 *ngIf="this.exemplairesDePersonne.length == 0">{{'document.title7' | translate}}</h3>
       <div class="infos">
        <p id="titre">
            {{'document.exemplaire.text9' | translate}} :
            <span class="title">{{this.exemplaire.personneRattachee.nom}}</span>
            <span class="title"> {{this.exemplaire.personneRattachee.prenom}}</span>
        </p>
        <p *ngIf="this.exemplairesDePersonne.length > 0" id="titre">
            {{'document.exemplaire.text6' | translate}} :
            <span class="title">{{this.exemplaire.dateCreation | date: 'dd/MM/yyyy'}}</span>
            {{'document.exemplaire.text7' | translate}}
            <span class="title">{{this.exemplaire.dateCreation | date: 'hh:mm:ss'}}</span>
        </p>
           <div class="block1" *ngFor="let attributParCategorie of exemplaire.categories">
               <div class="pb-3" *ngIf="attributParCategorie.nom">
                   <h4>{{attributParCategorie.nom}}</h4>
                   <div class="contentBlock">
                       <div class="inputBlock" *ngFor="let attributParCategorie of attributParCategorie.listAttributsParCategories; let i = index">
                           <label>{{attributParCategorie.attribut.titre}} : </label>
                           <div class="valAttribut">
                            <span>{{rechercherValeurParIdAttribut(attributParCategorie.attribut.id,attributParCategorie.attribut.type)}}</span>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
        </div>

        <!-- tableau listing des mouvements -->

        <div *ngIf="(this.exemplairesDePersonne.length > 0) || (this.exemplaire.mouvements == undefined)" class="card-body p-0 tableBlock" id="tableList">
            <div class='table-responsive w-100'>
                <table class='table table-sm table-centered table-striped table-bordered w-100' mat-table [dataSource]="dataSourceMouvements">

                    <!-- libelle Column -->
                    <ng-container matColumnDef="libelle">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'preconisation.table.title1' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.ressource.libelle}} </td>
                    </ng-container>

                    <!-- quantite Column -->
                    <ng-container matColumnDef="quantite">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table2.title5' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{separateurDeMilliers(element.quantite)}}
                        </td>
                    </ng-container>

                    <!-- unite Column -->
                    <ng-container matColumnDef="unite">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table.title4' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.ressource.unite}}
                    </ng-container>

                    <!-- description Column -->
                    <ng-container matColumnDef="description">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'attributs.table.title2' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.description}}
                        </td>
                    </ng-container>

                    <!-- prix Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true && exemplaire.typeMouvement == typeNeutre" matColumnDef="prix">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table2.title7' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{separateurDeMilliers(element.prix)}}
                        </td>
                    </ng-container>

                    <!-- prixEntrée Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true && exemplaire.typeMouvement == typeAjout" matColumnDef="prixEntrée">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table.title5' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{separateurDeMilliers(element.prix)}}
                        </td>
                    </ng-container>

                    <!-- prixDeSortie Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true && exemplaire.typeMouvement == typeReduire" matColumnDef="prixDeSortie">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table.title9' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{separateurDeMilliers(element.prix)}} 
                        </td>
                    </ng-container>

                    <!-- montant total Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true" matColumnDef="montant total">
                            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table2.title10' | translate}}</th>
                            <td class="text-dark containCell" mat-cell *matCellDef="let element">{{separateurDeMilliers(element.quantite*element.prix)}}</td>
                    </ng-container>

                    <!-- distributeur Column -->
                    <ng-container *ngIf="exemplaire.contientDistributeurs == true" matColumnDef="distributeur">
                            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'preconisation.table.title5' | translate}} </th>
                            <td class="text-dark containCell" mat-cell *matCellDef="let element; let i = index"><div class="modifierDistributeurBlock">{{element.distributeur?.raisonSocial}}</div></td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedRessourcesColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedRessourcesColumns;"></tr>
                </table>

                <!-- montant total -->
                <div class="total" *ngIf="exemplaire.affichagePrix == true && exemplaire.mouvements?.length">
                    <span class="mr-2">{{'ressource.table2.title11' | translate}}</span>
                    <input type="text" [value]="separateurDeMilliers(sommeMontants())" disabled>
                </div>
            </div>
        </div>
        <div *ngIf="this.exemplairesDePersonne.length > 0" class="options">
            <button title="{{'lists.button1' | translate}}" class="btn btn-outline-warning" data-dismiss="modal"
                [useExistingCss]="true"
                styleSheetFile="assets/css/ticketPrint.scss"
                printSectionId="globalSection"
                ngxPrint>
                <i class="fas fa-print"></i>
            </button>
        </div>
    </div>
    <div *ngIf="this.exemplairesDePersonne.length > 0" id="rigthSection" class="" >
        <div class="w-100" id="accordianFilterId" role="tablist" aria-multiselectable="true">
            <div id="titleBlock">
                <div class="titleBlock" role="tab" id="sectionHeaderFilterId">
                    <h5 class="rigth">{{'document.exemplaire.text5' | translate}}</h5>
                    <div class="dropdown">
                        <button id="my-dropdownFiltre" class="btn p-0 dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-filter"></i>
                        </button>
                        <div class="dropdown-menu" id="sectionContentFilterId" aria-labelledby="my-dropdownFiltre">
                            <label class="dropdown-item" for="filtre" role="button" (click)="regrouperExemplairesParType('default')">
                                <input type="radio" checked  name="filtre" id=""> {{"document.exemplaire.text10" | translate}} {{"precomvt.table2.title3" | translate}}
                            </label>
                            <label class="dropdown-item" for="filtre" role="button" (click)="regrouperExemplairesParDate()">
                                <input type="radio" name="filtre" id=""> {{"document.exemplaire.text10" | translate}} {{'tickets.form.label3' | translate}}
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="triExemplairesBlock">
            <div *ngFor="let element of exemplairesDePersonne">
                <div *ngIf="element.titre">
                    <div>
                        <div>
                            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="true">
                                <li class="nav-item">
                                    <a class="nav-link titreDoc">
                                        <h4  *ngIf="element.titre != ''">{{element.titre}}</h4>
                                        <i class="right fas fa-angle-left"></i>
                                    </a>

                                    <ul class="nav-treeview listeDates">
                                        <li *ngFor="let exemplaires of element.exemplaires" class="nav-item hoverCol" [ngClass]="{'focusDoc': this.exemplaire.id == exemplaires.id, 'hoverCol': this.exemplaire.id != exemplaires.id}" role="button" (click)="switchExemplaires(exemplaires)">
                                            <div>
                                                <span class="titleExemplaire">
                                                    {{'document.exemplaire.text6' | translate}} :
                                                    {{exemplaires.dateCreation | date: 'dd/MM/yyyy'}}
                                                </span>
                                                <span class="titleExemplaire">
                                                    {{ 'document.exemplaire.text7' | translate}} 
                                                    {{exemplaires.dateCreation | date: 'hh:mm:ss'}}
                                                </span>
                                                <span class="titleExemplaire">
                                                    {{exemplaires.titre}}
                                                </span>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>