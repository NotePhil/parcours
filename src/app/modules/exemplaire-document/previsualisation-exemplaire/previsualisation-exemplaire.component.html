<div class="mainBlock" id="top2">
    <div class="globalSection">
       <h1>
           {{this.exemplaire.titre}} {{titre}}
       </h1>
       <div class="infos">
           <p id="titre">
               {{'tickets.table.title5' | translate}} :
               <span class="title">{{this.nomPatientCourant}}</span>
           </p>
           <div class="block1" *ngFor="let attributParCategorie of exemplaire.categories">
               <div class="pb-3" *ngIf="attributParCategorie.nom">
                   <h3>{{attributParCategorie.nom}}</h3>
                   <div class="contentBlock">
                       <div class="inputBlock" *ngFor="let attributParCategorie of attributParCategorie.listAttributsParCategories; let i = index">
                           <label class="form-label">{{attributParCategorie.attribut.titre}}</label>
                           <div class="valAttribut">  
                            <span>{{rechercherValeurParIdAttribut(attributParCategorie.attribut.id,attributParCategorie.attribut.type)}}</span>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
        </div>

        <!-- tableau listing des mouvements -->

        <div class="card-body p-0 tableBlock" id="tableList">
            <div class='table-responsive w-100'>
                <table class='table table-sm table-centered table-striped table-bordered w-100' mat-table [dataSource]="dataSourceMouvements">

                    <!-- libelle Column -->
                    <ng-container matColumnDef="libelle">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'preconisation.table.title1' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.ressource.libelle}} </td>
                    </ng-container>

                    <!-- quantite Column -->
                    <ng-container matColumnDef="quantite">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table2.title5' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.quantite}}
                        </td>
                    </ng-container>

                    <!-- unite Column -->
                    <ng-container matColumnDef="unite">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table.title4' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.ressource.unite}}
                    </ng-container>

                    <!-- description Column -->
                    <ng-container matColumnDef="description">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'attributs.table.title2' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.description}}
                        </td>
                    </ng-container>

                    <!-- prix Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true && exemplaire.typeMouvement == typeNeutre" matColumnDef="prix">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table2.title7' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.prix}}
                        </td>
                    </ng-container>

                    <!-- prixEntrée Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true && exemplaire.typeMouvement == typeAjout" matColumnDef="prixEntrée">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table.title5' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.prix}}
                        </td>
                    </ng-container>

                    <!-- prixDeSortie Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true && exemplaire.typeMouvement == typeReduire" matColumnDef="prixDeSortie">
                        <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table.title9' | translate}} </th>
                        <td class="text-dark containCell" mat-cell *matCellDef="let element">
                            {{element.prix}} 
                        </td>
                    </ng-container>

                    <!-- montant total Column -->
                    <ng-container *ngIf="exemplaire.affichagePrix == true" matColumnDef="montant total">
                            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'ressource.table2.title10' | translate}}</th>
                            <td class="text-dark containCell" mat-cell *matCellDef="let element">{{element.quantite*element.prix}}</td>
                    </ng-container>

                    <!-- distributeur Column -->
                    <ng-container *ngIf="exemplaire.contientDistributeurs == true" matColumnDef="distributeur">
                            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{'preconisation.table.title5' | translate}} </th>
                            <td class="text-dark containCell" mat-cell *matCellDef="let element; let i = index"><div class="modifierDistributeurBlock">{{element.distributeur?.raisonSocial}}</div></td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedRessourcesColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedRessourcesColumns;"></tr>
                </table>

                <!-- montant total -->
                <div class="total" *ngIf="exemplaire.affichagePrix == true && exemplaire.mouvements?.length">
                    <span class="mr-2">{{'ressource.table2.title11' | translate}}</span>
                    <input type="text" [value]="sommeMontants()" disabled>
                </div>
            </div>
        </div>
        <div class="options">
            <button type="button" [routerLink]="['/exemplaire-nouveau/modify/',exemplaire.id]" class="btn btn-outline-info">
                <i class="fas fa-pen"></i>
                {{'lists.button7' | translate}}
            </button>
        </div>
    </div>
    <div id="rigthSection" class="card" >
      <div class="titleBlock" id="titleBlock" class="entete0">
        <h2 class="rigth">{{'document.exemplaire.text5' | translate}}</h2>
      </div>
      <div class="triExemplairesBlock">
        <!-- <table class='table table-sm table-centered table-striped table-bordered w-100' mat-table [dataSource]="dataSourceAutresExemplaires" matSort (matSortChange)="announceSortChange($event)">
            <-- titre Column --
            <ng-container matColumnDef="titre">
                <-- <th class="text-dark pl-5 containHead" mat-header-cell *matHeaderCellDef mat-sort-header> {{'document.table.title1' | translate}} </th> --
                <td class="text-dark text-center containCell" mat-cell *matCellDef="let element" mat-sort-header> {{element.titre}}
                    <div *ngIf="element.titre">
                        <p>{{element.description}}</p>
                        <p>{{element.titre}}</p>
                    </div>
                </td>
            </ng-container>
            <-- <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr> --
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table> -->
        <table class="table table-striped table-bordered table-inverse table-responsive">
            <div *ngFor="let element of exemplairesDePersonne">
                <div *ngIf="element.titre">
                    <thead class="thead-inverse">
                        <tr>
                            <th>{{element.titre}}</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let exemplaire of element.exemplaires">
                        <tr>
                            <td scope="row">{{exemplaire.description}}</td>
                        </tr>
                    </tbody>
                </div>
            </div>
        </table>
      </div>
    </div>
</div>
